@startuml

hide footbox

title Диаграмма последовательности\nРегистрация в событии

participant Организатор

activate Организатор

create Событие
Организатор -> Событие:Создать событие()
Организатор -> Событие:Добавить участника()
    activate Событие
    
    create Регистрация
    Событие -> Регистрация:Добавить регистрацию()
    
    activate Регистрация
    
    Регистрация -> Событие:<<возврат>>
    Событие -> Событие:Добавить регистрацию()
    activate Событие
    deactivate Событие
    
    deactivate Событие
    
    
    create Участник
    Регистрация -> Участник:Добавить участника()
    activate Участник
    Участник -> Регистрация:<<возврат>>
    
    Регистрация -> Регистрация:Добавить участника()
    activate Регистрация
    deactivate Регистрация
    
    Регистрация -> Регистрация:Изменить статус участия на "Приглашен"()
    activate Регистрация
    deactivate Регистрация
    
    Участник -> Регистрация:Подтверждение участия()
    
    Регистрация -> Регистрация:Изменить статус участия на "Одобрен"()
    activate Регистрация
    deactivate Регистрация
    
    Участник -> Регистрация:Оплата()
    deactivate Участник
    
    Регистрация -> Регистрация:Изменить статус оплаты с на \n"Требует подтверждения суперадмина"()
    
    activate Регистрация
    deactivate Регистрация 
    
    participant Суперадмин
    
    Регистрация -> Суперадмин:Запрос на подтверждение()
    
    activate Суперадмин
    
    Суперадмин -> Регистрация: Подтвердить оплату()
    deactivate Суперадмин
    
    Регистрация -> Регистрация:Изменить статус оплаты на \n"Требует подтверждения организатора"()
    
    activate Регистрация
    deactivate Регистрация 
    
    Регистрация -> Организатор: Запрос на подтверждение()
    
    Организатор -> Регистрация: Зарегистрировать в событии()
    
    Регистрация -> Регистрация:Изменить статус оплаты на \n"Оплачено"()
    
    activate Регистрация
    deactivate Регистрация
    
    
    deactivate Регистрация
    deactivate Организатор

@enduml